// Su Grid Tests
// =============


@include test-module ('Su [function]') {
  @include test('Fluid') {
    @include assert-equal(
      su(2, 4, 0.25, 'narrow', null, 'wide'),
      percentage(2.25/5),
      'Returns fluid span if no column-width is given');
  }

  @include test('Static') {
    @include assert-equal(
      su(2, 4, 0.25, 'narrow', 4em, 'wide'),
      2.25*4em,
      'Returns static span in same units as column-width');
  }
}

@include test-module('Su Span [function]') {
  @include test('Symmetrical') {
    @include assert-equal(
      su-span(5, 8, 0.25, 'narrow'),
      6,
      'Symmetrical output is equal to the column-sum of the span');
  }

  @include test('Asymmetrical') {
    @include assert-equal(
      su-span(3, 1 3 2 4 2, 0.25, 'wider', 2),
      10,
      'Asymmetrical output is equal to the column-sum of a subset slice');
  }

  @include test('Keyword location') {
    @include assert-equal(
      su-span(3, 3 2 4 1 2, 0.25, 'wider', 'first'),
      10,
      'Keyword location is converted before being processed');
  }
}


@include test-module('Su Count [function]') {
  @include test('Count the columns in a symmetrical grid') {
    @include assert-equal(
      su-count(12),
      12,
      'Input and output should be the same.');
  }

  @include test('Count the columns in an asymmetrical grid') {
    @include assert-equal(
      su-count(1 1 2 3 5 8),
      length(1 1 2 3 5 8),
      'Output should equal list length.');
  }
}


@include test-module('Su Sum [function]') {
  @include test('Calculate the total units in a symmetrical grid') {
    @include assert-equal(
      su-sum(9, 0.5, 'wider'),
      14,
      'Returns combined column and gutter units');
  }

  @include test('Calculate the total units in an asymmetrical grid') {
    @include assert-equal(
      su-sum(1 2 3 1 2, 0.25, 'narrow'),
      10,
      'Returns combined column and gutter units');
  }

  @include test('Handle fraction spans') {
    @include assert-equal(
      su-sum(1/4, 0.25, 'narrow'),
      1/4,
      'No fractional gutters are added to fraction spans');
  }

  @include test('Handle fraction spans > 1') {
    @include assert-equal(
      su-sum(2.5, 0.25, 'narrow'),
      3,
      'No fractional gutters are added to fraction spans');
  }
}


@include test-module('Su Slice [function]') {
  @include test('Slice an asymmetrical grid') {
    @include assert-equal(
      su-slice(3, 1 1 2 3 5 8, 3),
      2 3 5,
      'Returns subset of asymmetrical columns based on span and location');
  }

  @include test('Slice an asymmetrical grid with fractions') {
    @include assert-equal(
      su-slice(2.5, 2 4 6 8, 1),
      2 4 3,
      'Slice a fraction of an asymmetrical column');
  }
}


@include test-module('Su Is Symmetrical [function]') {
  @include test('Symmetrical') {
    @include assert-true(
      su-is-symmetrical(3),
      'Numbers represent a symmetrical grid');
  }

  @include test('Asymmetrical') {
    @include assert-false(
      su-is-symmetrical(1 1 2 3 5 8),
      'Lists of numbers represent an asymmetrical grid');
  }

  @include test('Asymmetrical [one-column]') {
    $list: (4,);

    @include assert-false(
      su-is-symmetrical($list),
      'Single-item lists represent a (dumb) asymmetrical grid');
  }
}
